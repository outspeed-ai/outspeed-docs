---
title: 'WebRTCConnectionManager'
description: 'A manager for handling WebRTC connections within a React application.'
---

## Overview

`WebRTCConnectionManager` is a utility class designed to manage and facilitate WebRTC connections for real-time communication in web applications. It provides methods to configure, establish, and manage the lifecycle of WebRTC connections, including handling of audio, video, and data channels.

## Usage

To use `WebRTCConnectionManager`, you need to set a configuration and then retrieve an instance of the connection to start or stop the communication process.

### Setting Configuration

Before initiating a connection, you must set the configuration using `setConfig`. This configuration includes necessary details such as URLs for signaling, media constraints, and any STUN/TURN server configurations.

```jsx
WebRTCConnectionManager.setConfig(yourConfigObject);
```

### Getting the Connection Instance

Once the configuration is set, you can get the connection instance by calling `get`. This method ensures that the connection is a singleton and returns the existing instance if already created.

```jsx
const connection = WebRTCConnectionManager.get();
```

### Connecting

To start the WebRTC connection, call the `connect` method on the connection instance. This method sets up the necessary event listeners and starts the ICE candidate gathering process.

```jsx
connection.connect();
```

### Disconnecting

To properly close the connection and clean up resources, call the `disconnect` method.

```jsx
connection.disconnect();
```

### Event Handling

`WebRTCConnectionManager` allows you to handle different events such as state changes, track events, and data channel messages.

#### Adding Event Listeners

```jsx
connection.on('statechange', (state) => {
  console.log('Connection state changed:', state);
});

connection.on('track', (event) => {
  console.log('New track:', event.track);
});

connection.on('message', (event) => {
  console.log('New message:', event.data);
});
```

#### Removing Event Listeners

```jsx
connection.off('statechange', stateChangeHandler);
connection.off('track', trackEventHandler);
connection.off('message', messageEventHandler);
```

<RequestExample>
```jsx WebRTCConnectionManager Example
import React, { useEffect } from 'react';
import { WebRTCConnectionManager } from '@yourlib/realtime';

function RealtimeComponent({ config }) {
  useEffect(() => {
    WebRTCConnectionManager.setConfig(config);
    const connection = WebRTCConnectionManager.get();

    connection.connect();

    return () => {
      connection.disconnect();
    };
  }, [config]);

  return <div>Realtime Communication Enabled</div>;
}

export default RealtimeComponent;
```
</RequestExample>

